<h1>Index trong database</h1>

<h2 class="heading">Index trong database l√† g√¨?</h2>
<ul>
  <li>
    Index (ch·ªâ m·ª•c) l√† m·ªôt c·∫•u tr√∫c d·ªØ li·ªáu ƒë∆∞·ª£c t·∫°o ra ƒë·ªÉ tƒÉng t·ªëc ƒë·ªô truy v·∫•n
    d·ªØ li·ªáu t·ª´ b·∫£ng trong c∆° s·ªü d·ªØ li·ªáu.
  </li>
  <li>
    Trong database c≈©ng v·∫≠y: index gi√∫p truy v·∫•n d·ªØ li·ªáu nhanh h∆°n b·∫±ng c√°ch cho
    ph√©p h·ªá qu·∫£n tr·ªã c∆° s·ªü d·ªØ li·ªáu (DBMS) t√¨m th√¥ng tin m√† kh√¥ng c·∫ßn qu√©t to√†n
    b·ªô b·∫£ng.
  </li>
  <li>
    H√£y t∆∞·ªüng t∆∞·ª£ng: N·∫øu b·∫£ng l√† m·ªôt cu·ªën s√°ch, th√¨ index gi·ªëng nh∆∞ m·ª•c l·ª•c,
    gi√∫p b·∫°n tra nhanh ƒë·∫øn v·ªã tr√≠ c·∫ßn t√¨m, thay v√¨ ph·∫£i ƒë·ªçc h·∫øt c·∫£ quy·ªÉn.
  </li>
</ul>
<p class="text-info">
  Ok v·ªõi 1 b·∫£ng users m√† c√≥ 1-2 ch·ª•c d·ªØ li·ªáu th√¨ kh√¥ng b√µ ƒë·ªÉ test ƒë√¢u , n√™n h√£y
  l√†m 1 b·∫£ng c√≥ tri·ªáu b·∫£n ghi cho b√µ c√¥ng test.
</p>
<p>M√¨nh c√≥ 1 b·∫£ng user v·ªõi 10 tri·ªáu b·∫£n ghi</p>
<img src="img/chap4/1.png" alt="" />
<p>
  V√† gi·ªù M√¨nh s·∫Ω th·ª≠ d√πng 1 c√¢u l·ªánh
  <b>SELECT * FROM `users` WHERE `name` LIKE '%488534%' LIMIT 100</b> ch·∫≥ng h·∫°n
</p>
<p>V√† k·∫øt qu·∫£ , 28s cho 1 b·∫£n ghi</p>
<img src="img/chap4/2.png" alt="" />

<p>
  V·ªõi l√≠ thuy·∫øt ·ªü tr√™n , v√¨ m√¨nh kh√¥ng ƒë√°nh index(ch·ªâ m·ª•c) cho c·ªôt `name` n√¢y.
  n√™n truy v·∫•n s·∫Ω ch·∫°y qua t·∫•t c·∫£ c√°c row c·ªßa c·ªôt `name` ƒë·ªÉ so s√°nh v√† l·∫•y ra
  nh·ªØng row tho·∫£ m√£n
</p>

<h2>Ti·∫øn h√†nh t·∫°o INDEX cho c·ªôt</h2>
<p>Ok gi·ªù m√¨nh s·∫Ω ƒëi t·∫°o th√¥i.</p>
<div class="code-block">
  <button class="copy-button" onclick="copyCode(this)">Sao ch√©p</button>
  <pre>
    -- CREATE INDEX t√™n_index ON b·∫£ng(c·ªôt)
    CREATE INDEX idx_email ON users(email);</pre
  >
</div>

<p>Ki·ªÉm tra ƒë√£ c√≥ index ch∆∞a</p>
<div class="code-block">
  <button class="copy-button" onclick="copyCode(this)">Sao ch√©p</button>
  <pre>
    -- SHOW INDEXES FORM b·∫£ng
   SHOW INDEXES FROM users</pre
  >
</div>

<p class="text-info">V√† b√πm</p>
<img src="img/chap4/3.png" alt="" />
<p>
  Th·∫•y g√¨ kh√¥ng , hi·ªáu su·∫•t g·∫•p tr√™n 30 l·∫ßn so v·ªõi b√¨nh th∆∞·ªùng ( ch·∫Øc l√† do m√°y
  m√¨nh kho·∫ª :v m√°y kh√°c c√≥ th·ªÉ t·∫ßm 10-20 l·∫ßn)
</p>

<h2>C√°c lo·∫°i index trong MySQL</h2>

<table
  style="
    border-collapse: collapse;
    width: 100%;
    margin-bottom: 20px;
    font-size: 16px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  "
>
  <tr style="background-color: #4a90e2; color: white">
    <th style="border: 1px solid #357abd; padding: 10px; text-align: left">
      Lo·∫°i Index
    </th>
    <th style="border: 1px solid #357abd; padding: 10px; text-align: left">
      M√¥ t·∫£
    </th>
    <th style="border: 1px solid #357abd; padding: 10px; text-align: left">
      V√≠ d·ª•
    </th>
  </tr>
  <tr style="background-color: #e6f0fa">
    <td style="border: 1px solid #357abd; padding: 10px">Primary Key Index</td>
    <td style="border: 1px solid #357abd; padding: 10px">
      T·ª± ƒë·ªông t·∫°o, duy nh·∫•t, kh√¥ng NULL, d√πng B-Tree.
    </td>
    <td style="border: 1px solid #357abd; padding: 10px">
      <code>id INT PRIMARY KEY</code>
    </td>
  </tr>
  <tr style="background-color: #f9fcff">
    <td style="border: 1px solid #357abd; padding: 10px">Unique Index</td>
    <td style="border: 1px solid #357abd; padding: 10px">
      ƒê·∫£m b·∫£o gi√° tr·ªã duy nh·∫•t, cho ph√©p NULL.
    </td>
    <td style="border: 1px solid #357abd; padding: 10px">
      <code>CREATE UNIQUE INDEX idx_email ON users(email)</code>
    </td>
  </tr>
  <tr style="background-color: #e6f0fa">
    <td style="border: 1px solid #357abd; padding: 10px">B-Tree Index</td>
    <td style="border: 1px solid #357abd; padding: 10px">
      M·∫∑c ƒë·ªãnh, h·ªó tr·ª£ so s√°nh v√† kho·∫£ng gi√° tr·ªã.
    </td>
    <td style="border: 1px solid #357abd; padding: 10px">
      <code>CREATE INDEX idx_name ON users(name)</code>
    </td>
  </tr>
  <tr style="background-color: #f9fcff">
    <td style="border: 1px solid #357abd; padding: 10px">Full-Text Index</td>
    <td style="border: 1px solid #357abd; padding: 10px">
      T√¨m ki·∫øm vƒÉn b·∫£n trong chu·ªói, d√πng cho MyISAM/InnoDB.
    </td>
    <td style="border: 1px solid #357abd; padding: 10px">
      <code>CREATE FULLTEXT INDEX idx_content ON articles(content)</code>
    </td>
  </tr>
  <tr style="background-color: #e6f0fa">
    <td style="border: 1px solid #357abd; padding: 10px">Spatial Index</td>
    <td style="border: 1px solid #357abd; padding: 10px">
      D√†nh cho d·ªØ li·ªáu kh√¥ng gian (t·ªça ƒë·ªô).
    </td>
    <td style="border: 1px solid #357abd; padding: 10px">
      <code>CREATE SPATIAL INDEX idx_location ON places(location)</code>
    </td>
  </tr>
  <tr style="background-color: #f9fcff">
    <td style="border: 1px solid #357abd; padding: 10px">Composite Index</td>
    <td style="border: 1px solid #357abd; padding: 10px">
      Index tr√™n nhi·ªÅu c·ªôt, t·ªëi ∆∞u truy v·∫•n k·∫øt h·ª£p.
    </td>
    <td style="border: 1px solid #357abd; padding: 10px">
      <code>CREATE INDEX idx_name_age ON users(name, age)</code>
    </td>
  </tr>
  <tr style="background-color: #e6f0fa">
    <td style="border: 1px solid #357abd; padding: 10px">Hash Index</td>
    <td style="border: 1px solid #357abd; padding: 10px">
      D√πng b·∫£ng bƒÉm, ch·ªâ h·ªó tr·ª£ `=`, d√πng trong MEMORY/NDB.
    </td>
    <td style="border: 1px solid #357abd; padding: 10px">
      <code>INDEX idx_name (name) USING HASH</code>
    </td>
  </tr>
</table>

<h2>3. C√°ch t·∫°o v√† qu·∫£n l√Ω index</h2>
<table
  style="
    border-collapse: collapse;
    width: 100%;
    margin-bottom: 20px;
    font-size: 16px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  "
>
  <tr style="background-color: #4a90e2; color: white">
    <th style="border: 1px solid #357abd; padding: 10px; text-align: left">
      H√†nh ƒë·ªông
    </th>
    <th style="border: 1px solid #357abd; padding: 10px; text-align: left">
      C√∫ ph√°p
    </th>
    <th style="border: 1px solid #357abd; padding: 10px; text-align: left">
      Ghi ch√∫
    </th>
  </tr>
  <tr style="background-color: #e6f0fa">
    <td style="border: 1px solid #357abd; padding: 10px">T·∫°o index</td>
    <td style="border: 1px solid #357abd; padding: 10px">
      <code>CREATE INDEX idx_name ON users(name)</code>
    </td>
    <td style="border: 1px solid #357abd; padding: 10px">
      T·∫°o sau khi b·∫£ng ƒë√£ t·ªìn t·∫°i.
    </td>
  </tr>
  <tr style="background-color: #f9fcff">
    <td style="border: 1px solid #357abd; padding: 10px">T·∫°o khi t·∫°o b·∫£ng</td>
    <td style="border: 1px solid #357abd; padding: 10px">
      <code
        >CREATE TABLE users (id INT, name VARCHAR(255), INDEX idx_name
        (name))</code
      >
    </td>
    <td style="border: 1px solid #357abd; padding: 10px">
      T√≠ch h·ª£p index trong ƒë·ªãnh nghƒ©a b·∫£ng.
    </td>
  </tr>
  <tr style="background-color: #e6f0fa">
    <td style="border: 1px solid #357abd; padding: 10px">X√≥a index</td>
    <td style="border: 1px solid #357abd; padding: 10px">
      <code>DROP INDEX idx_name ON users</code>
    </td>
    <td style="border: 1px solid #357abd; padding: 10px">
      X√≥a index kh√¥ng c·∫ßn thi·∫øt.
    </td>
  </tr>
  <tr style="background-color: #f9fcff">
    <td style="border: 1px solid #357abd; padding: 10px">Xem index</td>
    <td style="border: 1px solid #357abd; padding: 10px">
      <code>SHOW INDEX FROM users</code>
    </td>
    <td style="border: 1px solid #357abd; padding: 10px">
      Hi·ªÉn th·ªã t·∫•t c·∫£ index trong b·∫£ng.
    </td>
  </tr>
</table>

<h2 class="heading">4. C√°ch MySQL s·ª≠ d·ª•ng index</h2>

<table
  style="
    border-collapse: collapse;
    width: 100%;
    margin-bottom: 20px;
    font-size: 16px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  "
>
  <tr style="background-color: #4a90e2; color: white">
    <th style="border: 1px solid #357abd; padding: 10px; text-align: left">
      Tr∆∞·ªùng h·ª£p
    </th>
    <th style="border: 1px solid #357abd; padding: 10px; text-align: left">
      V√≠ d·ª•
    </th>
    <th style="border: 1px solid #357abd; padding: 10px; text-align: left">
      Ghi ch√∫
    </th>
  </tr>
  <tr style="background-color: #e6f0fa">
    <td style="border: 1px solid #357abd; padding: 10px">WHERE</td>
    <td style="border: 1px solid #357abd; padding: 10px">
      <code>WHERE name = 'John'</code>
    </td>
    <td style="border: 1px solid #357abd; padding: 10px">
      D√πng index tr√™n `name`.
    </td>
  </tr>
  <tr style="background-color: #f9fcff">
    <td style="border: 1px solid #357abd; padding: 10px">JOIN</td>
    <td style="border: 1px solid #357abd; padding: 10px">
      <code>JOIN orders ON users.id = orders.user_id</code>
    </td>
    <td style="border: 1px solid #357abd; padding: 10px">
      D√πng index tr√™n `id` ho·∫∑c `user_id`.
    </td>
  </tr>
  <tr style="background-color: #e6f0fa">
    <td style="border: 1px solid #357abd; padding: 10px">ORDER BY</td>
    <td style="border: 1px solid #357abd; padding: 10px">
      <code>ORDER BY name</code>
    </td>
    <td style="border: 1px solid #357abd; padding: 10px">
      D√πng index ƒë·ªÉ s·∫Øp x·∫øp.
    </td>
  </tr>
  <tr style="background-color: #f9fcff">
    <td style="border: 1px solid #357abd; padding: 10px">Ki·ªÉm tra</td>
    <td style="border: 1px solid #357abd; padding: 10px">
      <code>EXPLAIN SELECT * FROM users WHERE name = 'John'</code>
    </td>
    <td style="border: 1px solid #357abd; padding: 10px">
      Xem index ƒë∆∞·ª£c d√πng qua c·ªôt `key`.
    </td>
  </tr>
</table>

<h2 class="heading">. T·ªëi ∆∞u h√≥a index</h2>
<table
  style="
    border-collapse: collapse;
    width: 100%;
    margin-bottom: 20px;
    font-size: 16px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  "
>
  <tr style="background-color: #4a90e2; color: white">
    <th style="border: 1px solid #357abd; padding: 10px; text-align: left">
      Ti√™u ch√≠
    </th>
    <th style="border: 1px solid #357abd; padding: 10px; text-align: left">
      Chi ti·∫øt
    </th>
    <th style="border: 1px solid #357abd; padding: 10px; text-align: left">
      V√≠ d·ª•
    </th>
  </tr>
  <tr style="background-color: #e6f0fa">
    <td style="border: 1px solid #357abd; padding: 10px">N√™n ƒë√°nh index</td>
    <td style="border: 1px solid #357abd; padding: 10px">
      C·ªôt trong `WHERE`, `JOIN`, c·ªôt c√≥ ƒë·ªô ch·ªçn l·ªçc cao.
    </td>
    <td style="border: 1px solid #357abd; padding: 10px">
      <code>CREATE INDEX idx_email ON users(email)</code>
    </td>
  </tr>
  <tr style="background-color: #f9fcff">
    <td style="border: 1px solid #357abd; padding: 10px">Kh√¥ng n√™n ƒë√°nh</td>
    <td style="border: 1px solid #357abd; padding: 10px">
      C·ªôt √≠t gi√° tr·ªã, hay c·∫≠p nh·∫≠t, b·∫£ng nh·ªè.
    </td>
    <td style="border: 1px solid #357abd; padding: 10px">
      Tr√°nh index tr√™n `gender`.
    </td>
  </tr>
  <tr style="background-color: #e6f0fa">
    <td style="border: 1px solid #357abd; padding: 10px">Composite Index</td>
    <td style="border: 1px solid #357abd; padding: 10px">
      C·ªôt l·ªçc nh·∫•t ƒë·ª©ng ƒë·∫ßu.
    </td>
    <td style="border: 1px solid #357abd; padding: 10px">
      <code>CREATE INDEX idx_name_age ON users(name, age)</code>
    </td>
  </tr>
  <tr style="background-color: #f9fcff">
    <td style="border: 1px solid #357abd; padding: 10px">Covering Index</td>
    <td style="border: 1px solid #357abd; padding: 10px">
      Index ch·ª©a ƒë·ªß c·ªôt c·∫ßn thi·∫øt.
    </td>
    <td style="border: 1px solid #357abd; padding: 10px">
      <code>SELECT name, age FROM users WHERE name = 'John'</code>
    </td>
  </tr>
</table>

<h2 class="heading">H·∫°n ch·∫ø v√† nh∆∞·ª£c ƒëi·ªÉm</h2>
<table
  style="
    border-collapse: collapse;
    width: 100%;
    margin-bottom: 20px;
    font-size: 16px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  "
>
  <tr style="background-color: #4a90e2; color: white">
    <th style="border: 1px solid #357abd; padding: 10px; text-align: left">
      Nh∆∞·ª£c ƒëi·ªÉm
    </th>
    <th style="border: 1px solid #357abd; padding: 10px; text-align: left">
      M√¥ t·∫£
    </th>
  </tr>
  <tr style="background-color: #e6f0fa">
    <td style="border: 1px solid #357abd; padding: 10px">Chi·∫øm dung l∆∞·ª£ng</td>
    <td style="border: 1px solid #357abd; padding: 10px">
      T·∫°o th√™m m·ªôt c·∫•u tr√∫c d·ªØ li·ªáu ri√™ng.
    </td>
  </tr>
  <tr style="background-color: #f9fcff">
    <td style="border: 1px solid #357abd; padding: 10px">L√†m ch·∫≠m ghi</td>
    <td style="border: 1px solid #357abd; padding: 10px">
      `INSERT`, `UPDATE`, `DELETE` ph·∫£i c·∫≠p nh·∫≠t index.
    </td>
  </tr>
  <tr style="background-color: #e6f0fa">
    <td style="border: 1px solid #357abd; padding: 10px">Qu√° nhi·ªÅu index</td>
    <td style="border: 1px solid #357abd; padding: 10px">
      Tr√¨nh t·ªëi ∆∞u h√≥a c√≥ th·ªÉ ch·ªçn sai.
    </td>
  </tr>
</table>

<h2 style="font-size: 24px">KHI N√ÄO N√äN D√ôNG INDEX</h2>
<table style="border-collapse: collapse; width: 100%; font-size: 18px">
  <thead>
    <tr style="background-color: #f0f0f0">
      <th style="border: 1px solid #ccc; padding: 10px">Tr∆∞·ªùng h·ª£p</th>
      <th style="border: 1px solid #ccc; padding: 10px">N√™n t·∫°o index?</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="border: 1px solid #ccc; padding: 10px">
        C·ªôt d√πng trong <code>WHERE</code> th∆∞·ªùng xuy√™n
      </td>
      <td style="border: 1px solid #ccc; padding: 10px">‚úÖ C√≥</td>
    </tr>
    <tr>
      <td style="border: 1px solid #ccc; padding: 10px">
        C·ªôt d√πng <code>JOIN</code>, <code>ORDER BY</code>, <code>GROUP BY</code>
      </td>
      <td style="border: 1px solid #ccc; padding: 10px">‚úÖ C√≥</td>
    </tr>
    <tr>
      <td style="border: 1px solid #ccc; padding: 10px">
        C·ªôt c·∫ßn ƒë·∫£m b·∫£o duy nh·∫•t (<code>UNIQUE</code>)
      </td>
      <td style="border: 1px solid #ccc; padding: 10px">‚úÖ C√≥</td>
    </tr>
    <tr>
      <td style="border: 1px solid #ccc; padding: 10px">
        T√¨m ki·∫øm vƒÉn b·∫£n (<code>MATCH ... AGAINST</code>)
      </td>
      <td style="border: 1px solid #ccc; padding: 10px">‚úÖ FULLTEXT</td>
    </tr>
    <tr>
      <td style="border: 1px solid #ccc; padding: 10px">
        C·ªôt c√≥ t√≠nh ph√¢n bi·ªát cao (nhi·ªÅu gi√° tr·ªã kh√°c nhau)
      </td>
      <td style="border: 1px solid #ccc; padding: 10px">‚úÖ T·ªët nh·∫•t</td>
    </tr>
  </tbody>
</table>

<br />

<h2 style="font-size: 24px">KH√îNG N√äN D√ôNG INDEX (Ho·∫∑c H·∫°n ch·∫ø)</h2>
<table style="border-collapse: collapse; width: 100%; font-size: 18px">
  <thead>
    <tr style="background-color: #ffecec">
      <th style="border: 1px solid #ccc; padding: 10px">Tr∆∞·ªùng h·ª£p</th>
      <th style="border: 1px solid #ccc; padding: 10px">L√Ω do</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="border: 1px solid #ccc; padding: 10px">B·∫£ng nh·ªè (√≠t d√≤ng)</td>
      <td style="border: 1px solid #ccc; padding: 10px">
        Index kh√¥ng gi√∫p nhi·ªÅu v√¨ truy v·∫•n v·ªën ƒë√£ nhanh
      </td>
    </tr>
    <tr>
      <td style="border: 1px solid #ccc; padding: 10px">
        C·ªôt c√≥ gi√° tr·ªã l·∫∑p l·∫°i cao (VD: gender, status...)
      </td>
      <td style="border: 1px solid #ccc; padding: 10px">
        Hi·ªáu qu·∫£ index th·∫•p, v·∫´n ph·∫£i qu√©t nhi·ªÅu d√≤ng
      </td>
    </tr>
    <tr>
      <td style="border: 1px solid #ccc; padding: 10px">
        T·∫°o qu√° nhi·ªÅu index tr√™n 1 b·∫£ng
      </td>
      <td style="border: 1px solid #ccc; padding: 10px">
        L√†m ch·∫≠m khi INSERT/UPDATE v√¨ ph·∫£i c·∫≠p nh·∫≠t nhi·ªÅu ch·ªâ m·ª•c
      </td>
    </tr>
    <tr>
      <td style="border: 1px solid #ccc; padding: 10px">
        D√πng <code>LIKE '%abc%'</code> ho·∫∑c h√†m x·ª≠ l√Ω chu·ªói
      </td>
      <td style="border: 1px solid #ccc; padding: 10px">
        Kh√¥ng t·∫≠n d·ª•ng ƒë∆∞·ª£c index d·∫°ng BTREE
      </td>
    </tr>
    <tr>
      <td style="border: 1px solid #ccc; padding: 10px">
        Truy v·∫•n d√πng h√†m tr√™n c·ªôt (VD: <code>LOWER(name)</code>)
      </td>
      <td style="border: 1px solid #ccc; padding: 10px">
        MySQL kh√¥ng d√πng index n·∫øu c·ªôt b·ªã bi·∫øn ƒë·ªïi
      </td>
    </tr>
  </tbody>
</table>

<h2 style="font-size: 24px">
  üìò Gi·∫£i th√≠ch chi ti·∫øt c√°c c·ªôt trong <code>EXPLAIN</code> (MySQL)
</h2>
<table style="border-collapse: collapse; width: 100%; font-size: 18px">
  <thead>
    <tr style="background-color: #f0f0f0">
      <th style="border: 1px solid #ccc; padding: 10px">C·ªôt</th>
      <th style="border: 1px solid #ccc; padding: 10px">√ù nghƒ©a</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="border: 1px solid #ccc; padding: 10px"><b>id</b></td>
      <td style="border: 1px solid #ccc; padding: 10px">
        Th·ª© t·ª± th·ª±c thi trong truy v·∫•n (s·ªë l·ªõn h∆°n ch·∫°y tr∆∞·ªõc, cho bi·∫øt ƒë·ªô l·ªìng
        nhau c·ªßa subquery)
      </td>
    </tr>
    <tr>
      <td style="border: 1px solid #ccc; padding: 10px"><b>select_type</b></td>
      <td style="border: 1px solid #ccc; padding: 10px">
        Lo·∫°i truy v·∫•n (ph√¢n lo·∫°i t·ª´ng ph·∫ßn c·ªßa truy v·∫•n):
        <ul style="margin: 5px 0; padding-left: 20px">
          <li>
            <code>SIMPLE</code>: Truy v·∫•n ƒë∆°n, kh√¥ng c√≥ UNION ho·∫∑c subquery
          </li>
          <li><code>PRIMARY</code>: Truy v·∫•n ngo√†i c√πng khi c√≥ subquery</li>
          <li><code>SUBQUERY</code>: Truy v·∫•n con trong SELECT/WHERE/HAVING</li>
          <li><code>DERIVED</code>: Subquery trong FROM, t·∫°o b·∫£ng t·∫°m</li>
          <li><code>UNION</code>: Truy v·∫•n ph√≠a sau UNION</li>
          <li><code>UNION RESULT</code>: Ph·∫ßn t·ªïng h·ª£p k·∫øt qu·∫£ c·ªßa UNION</li>
          <li>
            <code>DEPENDENT SUBQUERY</code>: Subquery ph·ª• thu·ªôc v√†o truy v·∫•n cha
            (ph·∫£i ch·∫°y l·∫°i)
          </li>
          <li>
            <code>DEPENDENT UNION</code>: UNION ph·ª• thu·ªôc v√†o truy v·∫•n cha
          </li>
          <li><code>MATERIALIZED</code>: Subquery ƒë∆∞·ª£c cache s·∫µn (MySQL 8+)</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="border: 1px solid #ccc; padding: 10px"><b>table</b></td>
      <td style="border: 1px solid #ccc; padding: 10px">
        T√™n b·∫£ng (ho·∫∑c alias) ƒëang ƒë∆∞·ª£c truy v·∫•n
      </td>
    </tr>
    <tr>
      <td style="border: 1px solid #ccc; padding: 10px"><b>type</b></td>
      <td style="border: 1px solid #ccc; padding: 10px">
        Ki·ªÉu truy c·∫≠p d·ªØ li·ªáu:
        <ul style="margin: 5px 0; padding-left: 20px">
          <li><code>const</code>: Truy c·∫≠p 1 h√†ng duy nh·∫•t</li>
          <li><code>eq_ref</code>: So s√°nh kh√≥a ch√≠nh ho·∫∑c UNIQUE</li>
          <li><code>ref</code>: So s√°nh v·ªõi c·ªôt index th∆∞·ªùng</li>
          <li><code>range</code>: Truy c·∫≠p theo kho·∫£ng</li>
          <li><code>index</code>: Duy·ªát to√†n b·ªô index</li>
          <li><code>ALL</code>: Qu√©t to√†n b·∫£ng ‚ùå (n√™n tr√°nh)</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style="border: 1px solid #ccc; padding: 10px">
        <b>possible_keys</b>
      </td>
      <td style="border: 1px solid #ccc; padding: 10px">
        Danh s√°ch c√°c index MySQL c√≥ th·ªÉ d√πng
      </td>
    </tr>
    <tr>
      <td style="border: 1px solid #ccc; padding: 10px"><b>key</b></td>
      <td style="border: 1px solid #ccc; padding: 10px">
        Index th·ª±c s·ª± ƒë∆∞·ª£c s·ª≠ d·ª•ng
      </td>
    </tr>
    <tr>
      <td style="border: 1px solid #ccc; padding: 10px"><b>key_len</b></td>
      <td style="border: 1px solid #ccc; padding: 10px">
        ƒê·ªô d√†i key (index) ƒë∆∞·ª£c d√πng (t√≠nh theo byte)
      </td>
    </tr>
    <tr>
      <td style="border: 1px solid #ccc; padding: 10px"><b>ref</b></td>
      <td style="border: 1px solid #ccc; padding: 10px">
        Gi√° tr·ªã so s√°nh v·ªõi c·ªôt index (h·∫±ng s·ªë, bi·∫øn, c·ªôt kh√°c)
      </td>
    </tr>
    <tr>
      <td style="border: 1px solid #ccc; padding: 10px"><b>rows</b></td>
      <td style="border: 1px solid #ccc; padding: 10px">
        S·ªë d√≤ng ∆∞·ªõc t√≠nh c·∫ßn duy·ªát
      </td>
    </tr>
    <tr>
      <td style="border: 1px solid #ccc; padding: 10px"><b>filtered</b></td>
      <td style="border: 1px solid #ccc; padding: 10px">
        Ph·∫ßn trƒÉm d√≤ng ƒë∆∞·ª£c gi·ªØ l·∫°i sau khi √°p d·ª•ng WHERE (c√†ng th·∫•p c√†ng t·ªá)
      </td>
    </tr>
    <tr>
      <td style="border: 1px solid #ccc; padding: 10px"><b>Extra</b></td>
      <td style="border: 1px solid #ccc; padding: 10px">
        Th√¥ng tin b·ªï sung:
        <ul style="margin: 5px 0; padding-left: 20px">
          <li><code>Using where</code>: C√≥ l·ªçc ƒëi·ªÅu ki·ªán WHERE</li>
          <li>
            <code>Using index</code>: Ch·ªâ ƒë·ªçc t·ª´ index (kh√¥ng ƒë·ª•ng v√†o table)
          </li>
          <li>
            <code>Using temporary</code>: D√πng b·∫£ng t·∫°m (th∆∞·ªùng do GROUP BY,
            ORDER BY)
          </li>
          <li>
            <code>Using filesort</code>: S·∫Øp x·∫øp th·ªß c√¥ng ‚Äì hi·ªáu su·∫•t th·∫•p ‚ùå
          </li>
          <li>
            <code>Using join buffer</code>: D√πng b·ªô ƒë·ªám khi join kh√¥ng t·ªëi ∆∞u ‚ùå
          </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<h2 style="font-size: 24px">
  üìè Nguy√™n t·∫Øc "C√πng B√™n Tr√°i" (Leftmost Prefix Rule) trong Composite Index
</h2>

<table style="border-collapse: collapse; width: 100%; font-size: 18px">
  <thead>
    <tr style="background-color: #f0f0f0">
      <th style="border: 1px solid #ccc; padding: 10px">M√¥ t·∫£</th>
      <th style="border: 1px solid #ccc; padding: 10px">Chi ti·∫øt</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="border: 1px solid #ccc; padding: 10px">
        <b>Composite Index</b> l√† g√¨?
      </td>
      <td style="border: 1px solid #ccc; padding: 10px">
        L√† index bao g·ªìm <b>nhi·ªÅu c·ªôt</b> (VD: <code>INDEX (a, b, c)</code>).
      </td>
    </tr>

    <tr>
      <td style="border: 1px solid #ccc; padding: 10px">
        <b>Nguy√™n t·∫Øc "C√πng b√™n tr√°i"</b>
      </td>
      <td style="border: 1px solid #ccc; padding: 10px">
        MySQL <b>ch·ªâ s·ª≠ d·ª•ng index t·ª´ tr√°i sang ph·∫£i</b>, n·∫øu b·∫°n b·ªè qua c·ªôt ƒë·∫ßu
        ti√™n th√¨ index <u>kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng</u>.<br />
        üëâ T·ª©c l√†: v·ªõi <code>INDEX(a, b, c)</code> b·∫°n ph·∫£i l·ªçc theo
        <b>a</b> tr∆∞·ªõc m·ªõi c√≥ th·ªÉ d√πng <b>b</b> ho·∫∑c <b>c</b>.
      </td>
    </tr>

    <tr style="background-color: #f9f9f9">
      <td style="border: 1px solid #ccc; padding: 10px"><b>V√≠ d·ª• ƒë√∫ng</b></td>
      <td style="border: 1px solid #ccc; padding: 10px">
        C√≥ index: <code>INDEX(a, b, c)</code><br />
        ‚úÖ D√πng ƒë∆∞·ª£c index v·ªõi:
        <ul style="margin: 5px 0; padding-left: 20px">
          <li><code>WHERE a = 1</code></li>
          <li><code>WHERE a = 1 AND b = 2</code></li>
          <li><code>WHERE a = 1 AND b = 2 AND c = 3</code></li>
          <li>
            <code>WHERE a = 1 AND c = 3</code> (s·ª≠ d·ª•ng ƒë∆∞·ª£c ph·∫ßn ƒë·∫ßu l√† a)
          </li>
        </ul>
      </td>
    </tr>

    <tr>
      <td style="border: 1px solid #ccc; padding: 10px">
        <b>V√≠ d·ª• sai (kh√¥ng d√πng ƒë∆∞·ª£c index)</b>
      </td>
      <td style="border: 1px solid #ccc; padding: 10px">
        ‚ùå Kh√¥ng d√πng ƒë∆∞·ª£c index n·∫øu:
        <ul style="margin: 5px 0; padding-left: 20px">
          <li><code>WHERE b = 2</code></li>
          <li><code>WHERE c = 3</code></li>
          <li><code>WHERE b = 2 AND c = 3</code></li>
        </ul>
        üëâ V√¨ **b·∫°n ƒë√£ b·ªè qua c·ªôt ƒë·∫ßu ti√™n** l√† <code>a</code>
      </td>
    </tr>

    <tr style="background-color: #fffbe6">
      <td style="border: 1px solid #ccc; padding: 10px">
        <b>L∆∞u √Ω v·ªÅ LIKE ho·∫∑c RANGE</b>
      </td>
      <td style="border: 1px solid #ccc; padding: 10px">
        N·∫øu s·ª≠ d·ª•ng <code>LIKE '%abc'</code> ho·∫∑c <code>a &lt; 100</code> (ph√©p
        so s√°nh kh√¥ng =), th√¨ c√°c c·ªôt sau ƒë√≥ <b>kh√¥ng c√≤n d√πng index</b> ƒë∆∞·ª£c
        n·ªØa. <br />üëâ D·ª´ng t·ªëi ∆∞u t·∫°i c·ªôt c√≥ ph√©p LIKE/RANGE.
      </td>
    </tr>
  </tbody>



</table>
 
<p class="text-warning">T√≥m l·∫°i m√¨nh s·∫Ω set  c·ªôt n√†o c√≥ t·ªâ l·ªá c√°c tr∆∞·ªùng kh√°c nhau  theo th·ª© t·ª± gi·∫£m d·∫ßn</p>
<p>C√¥ng th·ª©c t√≠nh t·ªâ l·ªá c√°c tr∆∞·ªùng kh√°c nhau <br>
<b>
         SELECT COUNT(DISTINCT c·ªôt) / COUNT(*) AS `Ty_le_user_khac_nhau` FROM b·∫£ng;
    
</b> </p>